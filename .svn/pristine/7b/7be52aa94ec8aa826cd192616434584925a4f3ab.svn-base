/*******************************************************************************
 * Copyright (c) 2014 by baidu Software Corporation all right reserved.
 * 2014-7-15 
 * 
 *******************************************************************************/
package cn.hinge.game.sample.web;

import java.util.List;

import javax.annotation.Resource;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

import cn.hinge.game.sample.model.Sample;
import cn.hinge.game.sample.model.SampleExample;
import cn.hinge.game.sample.service.SampleService;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

/**
 * <pre>
 * 业务名:
 * 功能说明: 
 * 编写日期:	2014-7-15
 * 作者:	duyangang
 * 
 * 历史记录
 * 1、修改日期：
 *    修改人：
 *    修改内容：
 * </pre>
 */
@Controller
@Scope("prototype")
public class SampleAction extends ActionSupport {
	@Resource
	private SampleService sampleService;
	private Sample model;

	public Sample getModel() {
		return model;
	}

	public void setModel(Sample model) {
		this.model = model;
	}

	@Override
	public String execute() throws Exception {
		ActionContext.getContext().put("message", "what a big suprise!");
		return "success";
	}

	/**
	 * 方法说明：前往列表页
	 * 
	 * @return
	 */
	public String toIndex() {
		@SuppressWarnings("unchecked")
		List<Sample> result = sampleService.getByCondition(new SampleExample());
		ActionContext.getContext().put("list", result);
		return "toIndex";
	}

	/**
	 * 方法说明：删除
	 * 
	 * @return
	 */
	public String del() {
		sampleService.del(this.model.getId());
		return "redIndex";
	}

	public String toAdd() {
		return "toAdd";
	}

	public String toUpdate() {
		model = sampleService.get(model.getId());
		return "toUpdate";
	}

	public String saveOrUpdate() {
		if (model.getId() == 0) {
			// 增加
			sampleService.add(model);
		} else {
			// 修改
			sampleService.update(model,new SampleExample());
		}
		return "redIndex";
	}
}
